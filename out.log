[  2%] Building C object src/test/CMakeFiles/test.dir/user_proc_test.c.o
[  4%] Linking C static library libtest.a
[ 13%] Built target test
[ 28%] Built target aarch64
[ 47%] Built target common
[ 67%] Built target kernelx
[ 80%] Built target driver
[ 84%] Built target user
[ 86%] Linking C executable kernel8.elf
[ 91%] Built target kernel8.elf
[ 93%] Generating kernel8.asm
[ 95%] Generating kernel8.hdr
[ 97%] Generating kernel8.img
[ 97%] Built target kernel
[100%] Generating sd.img
mkfs.fat 4.2 (2021-01-31)
nmeta 92 (boot, super, log blocks 63 inode blocks 26, bitmap blocks 1) blocks 908 total 1000
balloc: first 93 blocks have been allocated
balloc: write bitmap block at sector 91
Checking that no-one is using this disk right now ... OK

Disk /root/data/OS-24Fall-FDU/build/boot/sd.img: 128 MiB, 134217728 bytes, 262144 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x6f252897

Old situation:

Device                                      Boot  Start    End Sectors Size Id Type
/root/data/OS-24Fall-FDU/build/boot/sd.img1        2048 133119  131072  64M  c W95 FAT32 (LBA)
/root/data/OS-24Fall-FDU/build/boot/sd.img2      133120 262143  129024  63M 83 Linux

>>> Created a new DOS (MBR) disklabel with disk identifier 0x6e472a8e.
/root/data/OS-24Fall-FDU/build/boot/sd.img1: Created a new partition 1 of type 'W95 FAT32 (LBA)' and of size 64 MiB.
/root/data/OS-24Fall-FDU/build/boot/sd.img2: Created a new partition 2 of type 'Linux' and of size 63 MiB.
/root/data/OS-24Fall-FDU/build/boot/sd.img3: Done.

New situation:
Disklabel type: dos
Disk identifier: 0x6e472a8e

Device                                      Boot  Start    End Sectors Size Id Type
/root/data/OS-24Fall-FDU/build/boot/sd.img1        2048 133119  131072  64M  c W95 FAT32 (LBA)
/root/data/OS-24Fall-FDU/build/boot/sd.img2      133120 262143  129024  63M 83 Linux

The partition table has been altered.
Syncing disks.
> dd if=/dev/zero of=/root/data/OS-24Fall-FDU/build/boot/boot.img seek=131071 bs=512 count=1
> mkfs.vfat -F 32 -s 1 /root/data/OS-24Fall-FDU/build/boot/boot.img
> mcopy -i /root/data/OS-24Fall-FDU/build/boot/boot.img /root/data/OS-24Fall-FDU/build/src/kernel8.img ::kernel8.img;
> mcopy -i /root/data/OS-24Fall-FDU/build/boot/boot.img armstub8-rpi4.bin ::armstub8-rpi4.bin;
> mcopy -i /root/data/OS-24Fall-FDU/build/boot/boot.img bootcode.bin ::bootcode.bin;
> mcopy -i /root/data/OS-24Fall-FDU/build/boot/boot.img config.txt ::config.txt;
> mcopy -i /root/data/OS-24Fall-FDU/build/boot/boot.img COPYING.linux ::COPYING.linux;
> mcopy -i /root/data/OS-24Fall-FDU/build/boot/boot.img fixup_cd.dat ::fixup_cd.dat;
> mcopy -i /root/data/OS-24Fall-FDU/build/boot/boot.img fixup.dat ::fixup.dat;
> mcopy -i /root/data/OS-24Fall-FDU/build/boot/boot.img fixup4.dat ::fixup4.dat;
> mcopy -i /root/data/OS-24Fall-FDU/build/boot/boot.img fixup4cd.dat ::fixup4cd.dat;
> mcopy -i /root/data/OS-24Fall-FDU/build/boot/boot.img LICENCE.broadcom ::LICENCE.broadcom;
> mcopy -i /root/data/OS-24Fall-FDU/build/boot/boot.img start_cd.elf ::start_cd.elf;
> mcopy -i /root/data/OS-24Fall-FDU/build/boot/boot.img start.elf ::start.elf;
> mcopy -i /root/data/OS-24Fall-FDU/build/boot/boot.img start4.elf ::start4.elf;
> mcopy -i /root/data/OS-24Fall-FDU/build/boot/boot.img start4cd.elf ::start4cd.elf;
> cc ../src/user/mkfs/main.c -o ../build/mkfs -I../src/

> ../build/mkfs /root/data/OS-24Fall-FDU/build/boot/fs.img 
> dd if=/dev/zero of=/root/data/OS-24Fall-FDU/build/boot/sd.img seek=262143 bs=512 count=1
> printf "2048, 65536K, c,\n133120, 64512K, L,\n" | sfdisk /root/data/OS-24Fall-FDU/build/boot/sd.img
> dd if=/root/data/OS-24Fall-FDU/build/boot/boot.img of=/root/data/OS-24Fall-FDU/build/boot/sd.img seek=2048 conv=notrunc
> dd if=/root/data/OS-24Fall-FDU/build/boot/fs.img of=/root/data/OS-24Fall-FDU/build/boot/sd.img seek=133120 conv=notrunc
[100%] Built target image
CPU 2: hello
CPU 0: hello
CPU 1: hello
CPU 3: hello
Hello world! (Core 2)
vm_test
vm_test PASS
user_proc_test
pid[0] = 1
pid[1] = 2
pid[2] = 3
pid[3] = 4
pid[4] = 5
pid[5] = 6
pid[6] = 7
pid[7] = 8
pid[8] = 9
pid[9] = 10
pid[10] = 11
pid[11] = 12
pid[12] = 13
pid[13] = 14
pid[14] = 15
pid[15] = 16
pid[16] = 17
pid[17] = 18
pid[18] = 19
pid[19] = 20
pid[20] = 21
pid[21] = 22
done
pid 19 killed
pid 22 killed
pid 21 killed
pid 20 killed
pid 18 killed
pid 17 killed
pid 16 killed
pid 15 killed
pid 14 killed
pid 13 killed
pid 12 killed
pid 11 killed
pid 10 killed
pid 9 killed
pid 8 killed
pid 7 killed
pid 6 killed
pid 5 killed
pid 4 killed
pid 3 killed
pid 2 killed
pid 1 killed
user_proc_test PASS
Runtime:
CPU 0: 65861
CPU 1: 65862
CPU 2: 66352
CPU 3: 65996
Proc 0: 11938
Proc 1: 11652
Proc 2: 12267
Proc 3: 11950
Proc 4: 11963
Proc 5: 11684
Proc 6: 11996
Proc 7: 11972
Proc 8: 11851
Proc 9: 12166
Proc 10: 12020
Proc 11: 12346
Proc 12: 12000
Proc 13: 12109
Proc 14: 12200
Proc 15: 12174
Proc 16: 11910
Proc 17: 11913
Proc 18: 11769
Proc 19: 11848
Proc 20: 12043
Proc 21: 12300
CPU 3: living
CPU 0: living
CPU 1: living
CPU 0: living
CPU 1: living
CPU 3: living
QEMU: Terminated
[100%] Built target qemu
